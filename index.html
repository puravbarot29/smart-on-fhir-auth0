<!DOCTYPE html>
<html>

<!--

Register for a Cerner sandbox account at:
http://fhir.cerner.com/millennium/dstu2/ -> code Console

1. create a repl.it account and fork this repo
2. register an app in the code Console
  - when registering, make sure to have patient scope and patient/Observation checked
  - replace https://ResponsibleDecentVideogames--maloykr.repl.co in launch uri and redirect uri with your own
3. in the launch.html 
  - replace clientId with your clientId 
  - replace redirect uri with your redirect uri

Test patients in that sandbox are described at 
https://groups.google.com/forum/#!topic/cerner-fhir-developers/edPUbVPIag0


Different EHRs to register your app at
https://fhir.cerner.com/millennium/dstu2/
https://open.epic.com
https://developer.allscripts.com
https://dev.smarthealthit.org/

-->

  <head>
    <title>FHIR Starter</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>

    <script src="js/jquery.js"></script>
    <script src="js/underscore.js"></script>
    <script src="js/moment.js"></script>
    <script src="js/jwt-decode.js"></script>

    <link rel="stylesheet" href="css/bootstrap.min.css">     
    <link rel="stylesheet" href="css/main.css">     
           

</head>


<body class="text-center">

    <div class="cover-container d-flex h-100 p-3 mx-auto flex-column">
      <header class="masthead mb-auto">
        <div class="inner">
          <h3 class="masthead-brand"></h3>
          <nav class="nav nav-masthead justify-content-center">
            <a class="nav-link active" href="#">Home</a>
            <a class="nav-link" href="#">Privacy</a>
            <a class="nav-link" href="#">Terms</a>
          </nav>
        </div>
      </header>

      <main role="main" class="inner cover">


        <h1 class="cover-heading">FHIR - Auth0 Login Example</h1>

        <p class="lead">
          <button class="btn btn-warning btn-large" id="login">Login with the Auth0</button>
        </p>
      </main>

      <footer class="mastfoot mt-auto">
        <div class="inner">
          <p></p>
        </div>
      </footer>
    </div>



<script>


var myApp = {}

myApp.data = {}


$(document).ready(function(){

//login button function
    $("body").on("click", "#login", function(){
        startAuth0Workflow()
    })

})


function startAuth0Workflow(){

    var iss = "https://fhir-open.cerner.com/dstu2/0b8a0111-e8e6-4c26-a91c-5069cbc6b1ca"
    localStorage["iss"] = iss
    window.location ="launch.html?iss="+iss+"&aud="

}


     </script>


  </body>
</html>
